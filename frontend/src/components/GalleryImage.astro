---
import { urlForImage } from "../lib/sanityImageUrlBuilder";
import TagLink from "./TagLink.astro";
import Tags from "./Tags.astro";

const { illustration } = Astro.props;

const img = illustration.image;
const width = 800;
const height = width / illustration.size.aspectRatio;
const imgUrl = urlForImage(img).width(width).fit("max").auto("format").url();
const thumbnailUrl = urlForImage(img)
  .width(400)
  .fit("max")
  .auto("format")
  .url();
---

<div class="ps-image transition duration-100 hover:-translate-y-1">
  <a
    href={imgUrl}
    data-pswp-width={width}
    data-pswp-height={height}
    target="_blank"
  >
    <img
      class="mx-auto"
      src={thumbnailUrl}
      alt={illustration.alt}
      width={width}
      height={height}
    />
  </a>
  <div class="caption-content hidden">
    <h1 class="uppercase text-lg">{illustration.title}</h1>
    <p>{illustration.caption}</p>
    <Tags tags={illustration.tags} path="/gallery/" />
  </div>
</div>
