---
import MainLayout from "../layouts/MainLayout.astro";
import { getAllPosts, getSiteSettings } from "../lib/sanity";
import { urlForImage } from "../lib/sanityImageUrlBuilder";
const settings = await getSiteSettings();
const allPosts = await getAllPosts();

//change sanity post schema drop the riso-
function getPostColors(color) {
  const risoColors = {
    red: "border-riso-red",
    green: "border-riso-green",
    blue: "border-riso-blue",
    purple: "border-riso-purple",
  };
  return risoColors[color];
}
---

<MainLayout>
  <h1
    class="mt-4 text-6xl text-riso-red font-bold font-display uppercase text-center"
  >
    {settings.title}
  </h1>
  <div class="mt-6 border-b-2 border-riso-yellow"></div>
  <p>{settings.description}</p>
  <ul>
    {
      allPosts.map((post) => (
        <li>
          <h2>{post.title}</h2>
          <img
            class:list={["border-l-16", getPostColors(post.color)]}
            loading="lazy"
            src={urlForImage(post.images[0]).width(300).url()}
            alt={post.images[0].altText}
          />
        </li>
      ))
    }
  </ul>
</MainLayout>
