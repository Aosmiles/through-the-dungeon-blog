---
import MainLayout from "../layouts/MainLayout.astro";
import { getAllPosts, getSiteSettings } from "../lib/sanity";
import { urlForImage } from "../lib/sanityImageUrlBuilder";
const settings = await getSiteSettings();
const allPosts = await getAllPosts();
---

<MainLayout>
  <h1
    class="mt-4 text-6xl text-riso-red font-bold font-display uppercase text-center"
  >
    {settings.title}
  </h1>
  <div class="mt-6 border-b-2 border-riso-yellow"></div>
  <p>{settings.description}</p>
  <ul>
    {
      allPosts.map((post) => (
        <li>
          <h2>{post.title}</h2>
          <img
            class="border-l-16 border-riso-blue"
            loading="lazy"
            src={urlForImage(post.images[0]).width(300).url()}
            alt={post.images[0].altText}
          />
        </li>
      ))
    }
  </ul>
</MainLayout>
