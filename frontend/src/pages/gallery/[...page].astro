---
import Gallery from "../../components/Gallery.astro";
import GalleryImage from "../../components/GalleryImage.astro";
import PaginationNav from "../../components/PaginationNav.astro";
import MainLayout from "../../layouts/MainLayout.astro";
import { getAllIllustrations } from "../../lib/sanity";

export async function getStaticPaths({ paginate }) {
  const allIllustrations = await getAllIllustrations();

  allIllustrations.map((illustration) => {
    return {
      props: { illustration },
    };
  });
  return paginate(allIllustrations, { pageSize: 30 });
}

const { page } = Astro.props;
---

<MainLayout>
  <Gallery illustrations={page.data} />
  <PaginationNav {page} />
</MainLayout>
